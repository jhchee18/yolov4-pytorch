import cv2
from urllib.request import urlopen
import numpy as np

def esp32():
    url = 'http://192.168.1.251/capture'
    while True:
        img_resp = urlopen(url)
        imgnp = np.asarray(bytearray(img_resp.read()), dtype="uint8")
        img = cv2.imdecode(imgnp, -1)
        cv2.imshow("Camera", img)
        if cv2.waitKey(1) == 113:
            break

